@using SiGeP.Model.DTO
@using Syncfusion.Blazor.DropDowns
@using SiGeP.UI.Services
@inject NavigationManager NavManager

@inject ProvinceService ProvinceService


<div class="form-group row text-sm-left text-md-right">
    <label class="col-form-label col-sm-3 my-auto">Sexo: </label>
    <div class="col-sm-9 my-auto">
        <SfDropDownList CssClass="custom-select e-multi-column"
                        TValue="int"
                        TItem="ProvinceDTO"
                        Placeholder="Seleccione una provincia"
                        DataSource="@provinceList"
                        @bind-Value="@selectedprovince.Id"
                        TabIndex="4"
                        Enabled="enabled">
            <DropDownListFieldSettings Value="Id" Text="Name"></DropDownListFieldSettings>
        </SfDropDownList>
    </div>
</div>


@code {
    #region Vars

    public bool enabled { get; set; } = true;

    List<ProvinceDTO> provinceList = new List<ProvinceDTO>();

    ProvinceDTO selectedprovince = new ProvinceDTO();

    #endregion

    protected override async void OnInitialized()
    {
        try
        {
            provinceList = await ProvinceService.GetProvincesAsync();
        }
        catch (Exception ex)
        {
            NavManager.NavigateTo($"/ErrorPage/{ex.Message.Replace("/", "-")}");
            return;
        }
        finally
        {
            StateHasChanged();
        }
    }
}


